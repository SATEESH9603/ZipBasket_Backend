spring.application.name=onlinetestbackendservice
jwt.expiration=3600000
# 1 hour in milliseconds

# ------------------------------
# Database (use env vars in cloud; override in application-local.properties for dev)
# ------------------------------
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:sqlserver://localhost:1433;databaseName=OnlineTest;encrypt=true;trustServerCertificate=true}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:springbootapiuser}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:}
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver

# Show SQL in logs
spring.jpa.show-sql=true
spring.jpa.hibernate.ddl-auto=update

# ------------------------------
# Mail (use env vars in cloud; override in application-local.properties for dev)
# ------------------------------
spring.mail.host=${SPRING_MAIL_HOST:smtp.gmail.com}
spring.mail.port=${SPRING_MAIL_PORT:587}
spring.mail.username=${SPRING_MAIL_USERNAME:}
spring.mail.password=${SPRING_MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true

# Frontend base URL (override via env var or application-local.properties)
app.frontend.baseurl=${APP_FRONTEND_BASEURL:http://localhost:3000}

# Swagger UI / OpenAPI Configuration
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.disable-swagger-default-url=true
springdoc.swagger-ui.try-it-out-enabled=true

# Disable open-in-view to prevent lazy-loading during view rendering
spring.jpa.open-in-view=false

# Reservation cleanup configuration (hours of inactivity before releasing reservations)
reservation.cleanup.hours=6

# Ensure schema.sql is executed on startup (SQL Server)
spring.sql.init.mode=always
spring.sql.init.platform=mssql
# Do not fail startup if schema.sql statements error (e.g., column exists)
spring.sql.init.continue-on-error=true

# ------------------------------
# Logging (scope + correlation id)
# ------------------------------
# Toggle HTTP request logs (filter)
app.logging.http=true
# Toggle service method entry/exit logs (AOP)
app.logging.method=true
# If true, includes method args in logs (may leak PII) - keep false by default
app.logging.includeArgs=false

# Include correlation id from MDC in every log line
logging.pattern.level=%5p [corr=%X{correlationId}]

# Optional file logging (uncomment to enable)
# logging.file.name=logs/${spring.application.name}.log

# ------------------------------
# Azure Application Insights
# ------------------------------
# Configure via environment variable APPLICATIONINSIGHTS_CONNECTION_STRING.
applicationinsights.connection.string=${APPLICATIONINSIGHTS_CONNECTION_STRING:}
azure.application-insights.instrumentation-key=${AZURE_APPLICATION_INSIGHTS_INSTRUMENTATION_KEY:}
logging.level.root=INFO

